/*
 * Trail of Bitcoin
 * Copyright (C) 2014  Danno Ferrin
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * version 2 as published by the Free Software Foundation.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
*/

package com.shemnon.btc.blockchaininfo;

import org.junit.Test;

import static org.junit.Assert.*;

/**
 * 
 * Created by shemnon on 2 Mar 2014.
 */
public class AddressTest {
    
    @Test
    public void walletFullOfSatoshis() {
        AddressInfo ai = AddressInfo.fromJson("{\n" +
                "\t\"hash160\":\"70a419336ae604ddf73e4f8199f1d03b3c2f260b\",\n" +
                "\t\"address\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\n" +
                "\t\"n_tx\":26,\n" +
                "\t\"total_received\":26,\n" +
                "\t\"total_sent\":0,\n" +
                "\t\"final_balance\":26,\n" +
                "\t\"txs\":[{\"result\":0,\"block_height\":288644,\"time\":1393794960,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"137.117.202.26\",\"hash\":\"29bbe4a82a117e4b77d089510895e9b217e4972ab7a3cc4c0914d4e82372daea\",\"vin_sz\":1,\"tx_index\":114315897,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114315897,\"type\":0},{\"n\":1,\"value\":2512401351,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114315897,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288641,\"time\":1393793339,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"71.167.21.29\",\"hash\":\"c57df3b55ce8a5e0d3863cdbff43ba5419e5c47af106dd0e9faa12812af62bbb\",\"vin_sz\":1,\"tx_index\":114314072,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114314072,\"type\":0},{\"n\":1,\"value\":2504756849,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114314072,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288636,\"time\":1393790289,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"78.192.12.243\",\"hash\":\"dde66e646f8a15813e7c47fc3e089a5c1f1d82259d857263c9f606e82e4b8c66\",\"vin_sz\":1,\"tx_index\":114312615,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114312615,\"type\":0},{\"n\":1,\"value\":2501441349,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114312615,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288629,\"time\":1393785905,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"176.104.69.157\",\"hash\":\"58ab3b77285f876664e1c8f6f399e69766bccbfeb02160c981c89022889894b0\",\"vin_sz\":1,\"tx_index\":114307774,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114307774,\"type\":0},{\"n\":1,\"value\":2512171369,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114307774,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288618,\"time\":1393779937,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"95.211.72.54\",\"hash\":\"5f177fc3d13757b1748bad6b50d5770795de36e1cfd8bccf8b1036db4cb9e810\",\"vin_sz\":1,\"tx_index\":114303455,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114303455,\"type\":0},{\"n\":1,\"value\":2501992235,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114303455,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288606,\"time\":1393775541,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"192.99.15.50\",\"hash\":\"69cae53fb7cfca4e90d005ad1a16802aebf47a6e9355598278325a5ee16e3de0\",\"vin_sz\":1,\"tx_index\":114298693,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114298693,\"type\":0},{\"n\":1,\"value\":2518888181,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114298693,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288604,\"time\":1393773110,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"5.79.79.141\",\"hash\":\"97036ebb496becbc2ff6d88fbda1a757a42c277d35535deed68c302bb040bd0a\",\"vin_sz\":1,\"tx_index\":114296924,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114296924,\"type\":0},{\"n\":1,\"value\":2510304107,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114296924,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288563,\"time\":1393746914,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"176.9.31.117\",\"hash\":\"74038cedfba6a311948b56f9dee312797804339d729f6f6a6eb23545adabf88b\",\"vin_sz\":1,\"tx_index\":114280439,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114280439,\"type\":0},{\"n\":1,\"value\":2503310009,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114280439,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288562,\"time\":1393746690,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"178.27.24.186\",\"hash\":\"53f7ff88eaba78a858156cedd176e2b02e26663e44524f691f9732f626f2ac4b\",\"vin_sz\":1,\"tx_index\":114280316,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114280316,\"type\":0},{\"n\":1,\"value\":2502400999,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114280316,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288538,\"time\":1393734624,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"91.121.27.72\",\"hash\":\"99e98d44142408c2a420e5afdb16604019b102abc2a8a56bd544f6e10a05f86e\",\"vin_sz\":1,\"tx_index\":114273802,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114273802,\"type\":0},{\"n\":1,\"value\":2503582000,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114273802,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288533,\"time\":1393730757,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"46.165.231.143\",\"hash\":\"da90e82efc022c326002b9b32ec468906bc5212c5cc05e901c3fed0a1bc565da\",\"vin_sz\":1,\"tx_index\":114271036,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114271036,\"type\":0},{\"n\":1,\"value\":2505268948,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114271036,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288523,\"time\":1393724524,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"135.0.96.191\",\"hash\":\"18c9228190d1de0f17ced042f9e7c20d13fbe54da57d09eb3ed15205cdfa28df\",\"vin_sz\":1,\"tx_index\":114265330,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114265330,\"type\":0},{\"n\":1,\"value\":2502159159,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114265330,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288518,\"time\":1393722484,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"185.16.84.190\",\"hash\":\"814d102954179cd638afe7d0a6e33bbe2558e6eeb92774848f99bbc83a1fd78e\",\"vin_sz\":1,\"tx_index\":114264045,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114264045,\"type\":0},{\"n\":1,\"value\":2511397989,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114264045,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288507,\"time\":1393713823,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"188.226.149.178\",\"hash\":\"ac86f1a1448e15a948f16123f82c2b21acd4816cd3910683eae9ef7b08f28151\",\"vin_sz\":1,\"tx_index\":114256692,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114256692,\"type\":0},{\"n\":1,\"value\":2502906703,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114256692,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288504,\"time\":1393711764,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"95.168.195.201\",\"hash\":\"3eb7c9a3e6d74488c0c99ab9b7c47dd9bfd7e2d69bd06e38408fc9c4eef7cfaa\",\"vin_sz\":1,\"tx_index\":114254457,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114254457,\"type\":0},{\"n\":1,\"value\":2505691195,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114254457,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288502,\"time\":1393710920,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"95.168.195.201\",\"hash\":\"ca6f5b7b9c0af63bf3efcb4f5238aba56c9a8415c4d229c7417b945db1683b4b\",\"vin_sz\":1,\"tx_index\":114253526,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114253526,\"type\":0},{\"n\":1,\"value\":2510563420,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114253526,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288489,\"time\":1393701087,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"188.63.232.244\",\"hash\":\"4c3b9e0b832e5ff500768e36a9f90a12f90959d0ce89f4274024a756c6e82fb8\",\"vin_sz\":1,\"tx_index\":114244390,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114244390,\"type\":0},{\"n\":1,\"value\":2507248819,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114244390,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288481,\"time\":1393698102,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"89.212.247.38\",\"hash\":\"8c1e34aaa48394663bb89f0f6e0f06eea2214b349e86a6b3b567f0cfe913dc6e\",\"vin_sz\":1,\"tx_index\":114241430,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114241430,\"type\":0},{\"n\":1,\"value\":2502699999,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114241430,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288477,\"time\":1393696529,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"188.122.92.136\",\"hash\":\"55122dbe3060aa60a88676c6edb1d20846d4e4ad0b0c3218e05ef38ec5b046b2\",\"vin_sz\":1,\"tx_index\":114239492,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114239492,\"type\":0},{\"n\":1,\"value\":2505047594,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114239492,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288466,\"time\":1393690172,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"82.73.54.86\",\"hash\":\"84d05963fbde6fcca3189ea062fa41b1e5fbc58040ebaff1995765882cf6d5d0\",\"vin_sz\":1,\"tx_index\":114233695,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114233695,\"type\":0},{\"n\":1,\"value\":2502067000,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114233695,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288460,\"time\":1393688131,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"188.226.149.178\",\"hash\":\"65ded7202bd14c8d1370beeb541fe1d5a70ee445fb6a2c1da219a257b7e983ac\",\"vin_sz\":1,\"tx_index\":114232318,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114232318,\"type\":0},{\"n\":1,\"value\":2502153641,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114232318,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288456,\"time\":1393687426,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"178.203.5.197\",\"hash\":\"429de5517140706924825bea2a2f442d1f5377f2485acd13c33e82a329640f5e\",\"vin_sz\":1,\"tx_index\":114231222,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114231222,\"type\":0},{\"n\":1,\"value\":2503892792,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114231222,\"type\":0}],\"size\":136},{\"result\":1,\"block_height\":288454,\"time\":1393686716,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"95.97.192.205\",\"hash\":\"9631231776fc760a2bcefbb2321557e29a180bc8f412047f53ed60b876c0c520\",\"vin_sz\":1,\"tx_index\":114230650,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114230650,\"type\":0},{\"n\":1,\"value\":2512814275,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114230650,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":288448,\"time\":1393684197,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"176.9.31.117\",\"hash\":\"ad505fa761138cf5832c9ff2a834491866ba08c12cd984e0f899ef5f95442349\",\"vin_sz\":1,\"tx_index\":114228389,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":114228389,\"type\":0},{\"n\":1,\"value\":2501400899,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":114228389,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":287807,\"time\":1393364991,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"163.117.150.17\",\"hash\":\"b76f74efe7bce963fecd4a91d0678084d33680241837342cd2d9602b47ba2eff\",\"vin_sz\":1,\"tx_index\":113943697,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":113943697,\"type\":0},{\"n\":1,\"value\":2500182144,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":113943697,\"type\":0}],\"size\":138},{\"result\":1,\"block_height\":287806,\"time\":1393364928,\"inputs\":[{}],\"vout_sz\":2,\"relayed_by\":\"209.190.122.2\",\"hash\":\"53bd7e3d9d7be17b84c09f8b36cb3e6e9981b5c56d3bf526a5e0a06b5e8cd30a\",\"vin_sz\":1,\"tx_index\":113943504,\"ver\":1,\"out\":[{\"n\":0,\"value\":1,\"addr\":\"1BGbGFBhsXYq6kTyjSC9AHRe1dhe76tD6i\",\"tx_index\":113943504,\"type\":0},{\"n\":1,\"value\":2509330643,\"addr\":\"1A73ExsM2doRwTLp82rv5U36QHbBFmHD1X\",\"tx_index\":113943504,\"type\":0}],\"size\":136}]\n" +
                "}");
        
        ai.getTXs().forEach(tx ->
                assertEquals(1, tx.getOutputs().get(0).getValueSatoshi())
        );
    }
}
